define(["jquery","knockout","app/request-invite/lib/requestInvite.ko.bindings"],function(e,t){var n=function(t){var n=this;n.baseUrl=t.baseUrl,n.id=ko.observable(""),n.show=ko.observable(!1),n.email=ko.observable(""),n.preferredLocationsQuery=ko.observable(""),n.success=ko.observable(!1),n.failure=ko.observable(!1),n.showNext=ko.observable(!1),n.showShareThis=ko.observable(!1),n.showTopBar=ko.observable(!0),n.close=function(){n.showRequestInvite(!1)},n.hideTopBar=function(){n.showTopBar(!1)},n.reset=function(){n.success(!1),n.failure(!1),n.show(!1),n.showShareThis(!1)},n.ask=function(){n.reset();if(!n.email())return;var t=e.ajax({url:n.baseUrl.concat("/userRegistration/requestInvite"),type:"POST",data:{email:n.email()},dataType:"json"});t.fail(function(e,t){n.failure(!0),n.success(!1),n.show(!1)}),t.done(function(e,t){n.id(e.id),n.failure(!1),n.success(!0),n.show(!0)}),t.always(function(e,t){console.log(t==="error"),t==="error"&&(n.success(!1),n.failure(!0))})},n.updateInvite=function(t){console.log(n.preferredLocationsQuery()),console.log("Preferred Locations:",e(t).find(n.preferredLocationsQuery()).val());var r=e.ajax({url:n.baseUrl.concat("/requestInvite/update/")+n.id(),type:"POST",data:"&preferredLocations="+e(t).find(n.preferredLocationsQuery()).val(),dataType:"json"});r.fail(function(e,t){n.failure(!0),n.success(!1)}),r.done(function(e,t){n.failure(!1),n.success(!0),n.show(!1),n.showShareThis(!0)}),r.always(function(e,t){console.log(t==="error"),t==="error"&&(n.success(!1),n.failure(!0),n.showShareThis(!1))})},n.openShareThis=function(){n.show(!1),n.showShareThis(!0)}};return n});